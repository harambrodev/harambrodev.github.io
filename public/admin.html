<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

<h2>Admin Giriş</h2>
<input id="pass" placeholder="Şifre">
<button onclick="login()">Giriş</button>

<div id="panel" style="display:none;">
    <h3>Yeni Uygulama Ekle</h3>
    <input id="name" placeholder="Uygulama adı"><br><br>
    <input id="logo" placeholder="Logo URL"><br><br>
    <input id="appstore" placeholder="App Store Link"><br><br>
    <input id="playstore" placeholder="Google Play Link"><br><br>
    <button onclick="addApp()">Ekle</button>

    <h3>Mevcut Uygulamalar</h3>
    <div id="list"></div>
</div>

</div>

<script>
function login(){
 fetch("/api/login",{method:"POST",headers:{'Content-Type':'application/json'},
 body:JSON.stringify({password:pass.value})})
 .then(r=>r.json()).then(d=>{
   if(d.success){
     panel.style.display="block";
   } else alert("Şifre yanlış");
 });
}

function loadApps(){
 fetch("/api/apps").then(r=>r.json()).then(data=>{
   list.innerHTML="";
   data.forEach(a=>{
     list.innerHTML+=`${a.name} 
     <button onclick="del('${a.name}')">Sil</button><br>`;
   });
 });
}

function addApp(){
 fetch("/api/add",{method:"POST",headers:{'Content-Type':'application/json'},
 body:JSON.stringify({
   name:name.value,
   logo:logo.value,
   appstore:appstore.value,
   playstore:playstore.value
 })}).then(()=>loadApps());
}

function del(n){
 fetch("/api/delete",{method:"POST",headers:{'Content-Type':'application/json'},
 body:JSON.stringify({name:n})}).then(()=>loadApps());
}
</script>

</body>
</html>
